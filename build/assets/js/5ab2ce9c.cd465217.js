"use strict";(self.webpackChunkx_1_docs=self.webpackChunkx_1_docs||[]).push([[329],{1401:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"operating-a-validator/installing-a-validator","title":"Installing a Validator","description":"1. Install Tachyon and Solana tools","source":"@site/docs/operating-a-validator/installing-a-validator.md","sourceDirName":"operating-a-validator","slug":"/operating-a-validator/installing-a-validator","permalink":"/operating-a-validator/installing-a-validator","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Operating a X1 Node","permalink":"/operating-a-validator/"},"next":{"title":"Managing a Validator","permalink":"/operating-a-validator/managing-a-validator"}}');var o=t(4848),r=t(8453);const s={},i="Installing a Validator",l={},c=[{value:"1. Install Tachyon and Solana tools",id:"1-install-tachyon-and-solana-tools",level:2},{value:"2. Optimize Your System (Linux)",id:"2-optimize-your-system-linux",level:2},{value:"3. Generate Key Pairs",id:"3-generate-key-pairs",level:2},{value:"4. Create a Validator Startup Script",id:"4-create-a-validator-startup-script",level:2},{value:"5. Create a Systemd Service",id:"5-create-a-systemd-service",level:2},{value:"6. Configure log rotation",id:"6-configure-log-rotation",level:2},{value:"7. Start the Validator",id:"7-start-the-validator",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"installing-a-validator",children:"Installing a Validator"})}),"\n",(0,o.jsx)(e.h2,{id:"1-install-tachyon-and-solana-tools",children:"1. Install Tachyon and Solana tools"}),"\n",(0,o.jsxs)(e.p,{children:["Following the ",(0,o.jsx)(e.a,{href:"../getting-started/installation",children:"installation guide"})," to install Tachyon and the solana tools."]}),"\n",(0,o.jsx)(e.h2,{id:"2-optimize-your-system-linux",children:"2. Optimize Your System (Linux)"}),"\n",(0,o.jsx)(e.p,{children:"Your system needs proper tuning to ensure smooth operation. Without these settings, your validator might not start."}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Run the following command to configure system settings:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:'sudo bash -c "cat >/etc/sysctl.d/21-tachyon-validator.conf <<EOF\n# Increase UDP buffer sizes\nnet.core.rmem_default = 134217728\nnet.core.rmem_max = 134217728\nnet.core.wmem_default = 134217728\nnet.core.wmem_max = 134217728\n\n# Increase memory-mapped files limit\nvm.max_map_count = 1000000\n\n# Increase the number of allowed open file descriptors\nfs.nr_open = 1000000\nEOF"\n\nsudo sysctl -p /etc/sysctl.d/21-tachyon-validator.conf\nsudo systemctl daemon-reload\n\nsudo bash -c "cat >/etc/security/limits.d/90-tachyon-nofiles.conf <<EOF\n# Increase process file descriptor limit\n* - nofile 1000000\nEOF"\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"3-generate-key-pairs",children:"3. Generate Key Pairs"}),"\n",(0,o.jsxs)(e.p,{children:["Use ",(0,o.jsx)(e.code,{children:"solana-keygen"})," to create your keys. Save your 12-word recovery phrase securely."]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Run the following command to create key pairs:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"solana-keygen new --no-passphrase -o ~/.config/solana/identity.json\nsolana-keygen new --no-passphrase -o ~/.config/solana/vote.json\nsolana-keygen new --no-passphrase -o ~/.config/solana/stake.json\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"4-create-a-validator-startup-script",children:"4. Create a Validator Startup Script"}),"\n",(0,o.jsxs)(e.p,{children:["Choose the type of node you want to run: ",(0,o.jsx)(e.strong,{children:"Validator"})," or ",(0,o.jsx)(e.strong,{children:"RPC"}),"."]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:["Run the following command to create a startup script:\n:::tabs key",":os"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"== Validator Node"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-shell",metastring:"[Validator Node]",children:"mkdir -p ~/bin\ncat > ~/bin/validator.sh <<EOF\n#!/bin/bash\nexec tachyon-validator \\\n    --identity ~/.config/solana/identity.json \\\n    --vote-account ~/.config/solana/vote.json \\\n    --known-validator Abt4r6uhFs7yPwR3jT5qbnLjBtasgHkRVAd1W6H5yonT \\\n    --known-validator 5NfpgFCwrYzcgJkda9bRJvccycLUo3dvVQsVAK2W43Um \\\n    --known-validator FcrZRBfVk2h634L9yvkysJdmvdAprq1NM4u263NuR6LC \\\n    --only-known-rpc \\\n    --log ./validator.log \\\n    --ledger ./ledger \\\n    --rpc-port 8899 \\\n    --full-rpc-api \\\n    --dynamic-port-range 8000-8030 \\\n    --entrypoint entrypoint1.testnet.x1.xyz:8001 \\\n    --entrypoint entrypoint2.testnet.x1.xyz:8000 \\\n    --entrypoint entrypoint3.testnet.x1.xyz:8000 \\\n    --wal-recovery-mode skip_any_corrupted_record \\\n    --limit-ledger-size 50000000 \\\n    --enable-rpc-transaction-history \\\n    --enable-extended-tx-metadata-storage \\\n    --rpc-pubsub-enable-block-subscription \\\n    --full-snapshot-interval-slots 5000 \\\n    --maximum-incremental-snapshots-to-retain 10 \\\n    --maximum-full-snapshots-to-retain 50\nEOF\nchmod +x ~/bin/validator.sh\n"})}),"\n",(0,o.jsx)(e.p,{children:"== RPC Node"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-shell",metastring:"[RPC Node]",children:"mkdir -p ~/bin\ncat > ~/bin/validator.sh <<EOF\n#!/bin/bash\nexec tachyon-validator \\\n    --identity ~/.config/solana/identity.json \\\n    --no-voting \\\n    --known-validator Abt4r6uhFs7yPwR3jT5qbnLjBtasgHkRVAd1W6H5yonT \\\n    --known-validator 5NfpgFCwrYzcgJkda9bRJvccycLUo3dvVQsVAK2W43Um \\\n    --known-validator FcrZRBfVk2h634L9yvkysJdmvdAprq1NM4u263NuR6LC \\\n    --only-known-rpc \\\n    --log ./validator.log \\\n    --ledger ./ledger \\\n    --rpc-port 8899 \\\n    --full-rpc-api \\\n    --dynamic-port-range 8000-8030 \\\n    --entrypoint entrypoint1.testnet.x1.xyz:8001 \\\n    --entrypoint entrypoint2.testnet.x1.xyz:8000 \\\n    --entrypoint entrypoint3.testnet.x1.xyz:8000 \\\n    --wal-recovery-mode skip_any_corrupted_record \\\n    --limit-ledger-size 50000000 \\\n    --enable-rpc-transaction-history \\\n    --enable-extended-tx-metadata-storage \\\n    --rpc-pubsub-enable-block-subscription \\\n    --full-snapshot-interval-slots 5000 \\\n    --maximum-incremental-snapshots-to-retain 10 \\\n    --maximum-full-snapshots-to-retain 50\nEOF\nchmod +x ~/bin/validator.sh\n"})}),"\n",(0,o.jsx)(e.p,{children:":::"}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"5-create-a-systemd-service",children:"5. Create a Systemd Service"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Run the following command to create a system service:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"cat > /etc/systemd/system/tachyon-validator.server <<EOF\n[Unit]\nDescription=x1-testnet Validator\nAfter=syslog.target network.target\n\n[Service]\nUser=ubuntu\nGroup=ubuntu\nEnvironment=RUST_LOG=solana_metrics=warn,info\nType=simple\nLimitNOFILE=1000000\n\nKillMode=process\nKillSignal=SIGINT\nTimeoutStopSec=600\nRestart=on-failure\nRestartSec=10s\nSyslogIdentifier=tachyon-validator\nExecStart=/home/ubuntu/bin/validator.sh\n\n[Install]\nWantedBy=multi-user.target\nEOF\n"})}),"\n",(0,o.jsx)(e.h2,{id:"6-configure-log-rotation",children:"6. Configure log rotation"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Run the following command to configure log rotation:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"cat > /etc/logrotate.d/tachyon-validator <<EOF\n/home/ubuntu/validator.log {\n    rotate 3\n    daily\n    compress\n    maxsize 1G\n    missingok\n    postrotate\n      systemctl kill -s USR1 tachyon-validator.service\n    endscript\n    create 0644 ubuntu ubuntu\n}\nEOF\n"})}),"\n",(0,o.jsx)(e.h2,{id:"7-start-the-validator",children:"7. Start the Validator"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Run the following command to start the validator and enable it on boot:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"sudo systemctl enable --now tachyon-validator\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.p,{children:"Your validator is now operational."}),"\n",(0,o.jsx)(e.p,{children:"::: tip\nYou must now stake your tokens to participate as a validator.\n:::"})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>i});var a=t(6540);const o={},r=a.createContext(o);function s(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);